<aura:component controller="EntiteController"
	extends="c:AbstractListCmp"
	implements="flexipage:availableForAllPageTypes">
	<aura:attribute name="title" type="String" default="Catégorie Risque"
		description="" />
	<aura:attribute name="subtitle" type="String"
		default="Liste des categories de risques" description="" />

	<aura:registerEvent name="navigateToEntiteShow"
		type="c:navigateToEntiteShow" />
	<aura:registerEvent name="eventEditEntiteClicked" type="c:eventEditEntiteClicked" description="" />

	<aura:handler action="{!c.doInit}" name="init" value="{!this}" />
	<aura:handler event="c:eventNewEntiteCreated" action="{!c.refreshList}" />

	<!-- 	 header -->
	<div class="slds-page-header">
		<div class="slds-media">
			<div class="slds-media__figure">
				<span class="slds-icon_container slds-icon-standard-opportunity"
					title="Description of icon when needed"> <c:svg class="slds-icon slds-page-header__icon" aria-hidden="true"
						xlinkHref="{!$Resource.slds+'/assets/icons/standard-sprite/svg/symbols.svg#opportunity'}" />
				</span>
			</div>
			<div class="slds-media__body">
				<h1 class="slds-page-header__title slds-truncate slds-align-middle"
					title="Liste des plans d'action">Liste des structures</h1>
				<p class="slds-text-body_small slds-line-height_reset">Nombre
					d'enregistrements ({!v.items.length})</p>

			</div>

		</div>
	</div>
	<!-- fin header -->
	<div class="slds-box slds-theme_shade slds-theme_alert-texture">
		<!--                 debut body -->


		<!-- début data-table -->
		<table
			class="slds-table slds-table_bordered slds-max-medium-table_stacked-horizontal slds-table_col-bordered slds-table_striped">
			<thead>
				<tr class="slds-text-title_caps">

					<th scope="col"
						class="slds-cell-wrap slds-cell-buffer_left slds-cell-buffer_right">
						<div class="slds-truncate" title="Nom">Nom</div>
					</th>
					<th scope="col"
						class="slds-cell-wrap slds-cell-buffer_left slds-cell-buffer_right">
						<div class="slds-truncate" title="Type">Tel</div>
					</th>
					<th scope="col"
						class="slds-cell-wrap slds-cell-buffer_left slds-cell-buffer_right">
						<div class="slds-truncate" title="Tel">Website</div>
					</th>
					<th scope="col"
						class="slds-cell-wrap slds-cell-buffer_left slds-cell-buffer_right">
						<div class="slds-truncate" title="Tel">ParentID</div>
					</th>
					<th scope="col"
						class="slds-cell-wrap slds-cell-buffer_left slds-cell-buffer_right">
						<div class="slds-truncate" title="Tel">Description</div>
					</th>
					<th scope="col"
						class="slds-cell-wrap slds-cell-buffer_left slds-cell-buffer_right">
						<div class="slds-truncate" title="Actions">Actions</div>
					</th>
				</tr>
			</thead>
			<tbody>
				<aura:iteration items="{!v.items}" var="item" indexVar="i">
					<tr>
						<td data-label="Nom">
							<div class="slds-truncate" title="{!item.Name}">
								<a data-index="{!i}" onclick="{!c.navigateToShow}">{!item.Name}</a>
							</div>
						</td>
						<td data-label="Phone">
							<div class="slds-truncate" title="{!item.Phone}">
								<ui:outputPhone value="{!item.Phone}" />
							</div>
						</td>
						<td data-label="Website">
							<div class="slds-truncate" title="{!item.Website}">
								<ui:outputText value="{!item.Website}" />
							</div>
						</td>
						<td data-label="ParentId">
							<div class="slds-truncate" title="{!item.ParentId}">
								<ui:outputText value="{!item.Parent.Name}" />
							</div>
						</td>
						<td data-label="Description">
							<div class="slds-truncate" title="{!item.Description}">
								<ui:outputTextArea value="{!item.Description}" />
							</div>
						</td>

						<td data-label="Action">
							<div class="slds-truncate" title="Actions">
								<div class="slds-einstein-header__actions">
									<div class="slds-button-group" role="group">
										<a data-index="{!i}" onclick="{!c.navigateToShow}"
											class="slds-button slds-button_icon slds-button_icon-border-filled"
											title="afficher" aria-pressed="false"> <c:svg class="slds-button__icon" aria-hidden="true"
												xlinkHref="{!$Resource.slds+'/assets/icons/utility-sprite/svg/symbols.svg#preview'}" />

											<span class="slds-assistive-text">Afficher</span>
										</a> 
										<a data-index="{!i}" onclick="{!c.registerEdit}"
												class="slds-button slds-button_icon slds-button_icon-border-filled"
												title="modifier" aria-pressed="false"> <c:svg class="slds-button__icon" aria-hidden="true"
													xlinkHref="{!$Resource.slds+'/assets/icons/utility-sprite/svg/symbols.svg#edit'}" />

												<span class="slds-assistive-text">Modifier</span>
											</a>
										<a data-index="{!i}" onclick="{!c.removeItem}"
											class="slds-button slds-button_icon slds-button_icon-border-filled"
											title="Supprimer" aria-pressed="false"> <c:svg class="slds-button__icon" aria-hidden="true"
												xlinkHref="{!$Resource.slds+'/assets/icons/utility-sprite/svg/symbols.svg#delete'}" />

											<span class="slds-assistive-text">supprimer</span>
										</a>
									</div>
								</div>
							</div>
						</td>

					</tr>
				</aura:iteration>
			</tbody>
		</table>
		<!-- fin data-table -->

		<!--debut bouton d'ajout -->
		<div class=" slds-grid  slds-wrap slds-align--absolute-center"
			style="">
			<div
				class=" slds-size--1-of-1   slds-p-horizontal--small slds-float—left"
				style="">

				<c:EntiteNewCmp />
				<c:EntiteEditCmp />
				

			</div>
		</div>
		<!-- fin bouton d'ajout -->


	</div>


	<!-- fin body -->


</aura:component>